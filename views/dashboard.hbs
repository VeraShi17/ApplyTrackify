<div class="list-group">
  {{#each lists as |list|}}
    <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
      <a href="/dashboard/{{list.slug}}">{{list.name}}</a>
      <div class="d-grid gap-2 d-md-block">
        {{!-- <button class="btn btn-primary" type="button">Rename</button> --}}
        <button class="btn btn-primary" onclick="renameList('{{list.slug}}')">Rename</button>
        <!-- Delete Form -->
        <form action="/delete-list" method="POST" onsubmit="return confirm('Are you sure?');">
            <input type="hidden" name="slug" value="{{list.slug}}">
            <button class="btn btn-secondary" type="submit">Delete</button>
        </form>
      </div>
    </div>
  {{/each}}
  <div class="list-group-item" id="creater">
    <form action="/create-list" method="POST" class="d-flex justify-content-between align-items-center">
      <input type="text" name="listName" class="form-control" placeholder="List name" aria-label="List name">
      <button type="submit" class="btn btn-primary">Create a new list</button>
    </form>
  </div>
</div>

<script>
function renameList(slug) {
  const newName = prompt("Please enter the new name for the list:");
  if (newName) {
    fetch('/rename-list', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ slug, newName }),
    }).then(response => {
      if (response.ok) {
        window.location.reload(); 
      }
    });
  }
}
</script>